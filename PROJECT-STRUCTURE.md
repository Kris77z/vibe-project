# ğŸ“ é¡¹ç›®æ¶æ„ä¸æ–‡ä»¶ç»“æ„

## ğŸ—ï¸ æ•´ä½“æ¶æ„

```
vibe-project/                           # é¡¹ç›®æ ¹ç›®å½•
â”œâ”€â”€ ğŸ“„ é…ç½®æ–‡ä»¶
â”‚   â”œâ”€â”€ package.json                    # é¡¹ç›®ä¾èµ–å’Œè„šæœ¬
â”‚   â”œâ”€â”€ tsconfig.json                   # TypeScripté…ç½®
â”‚   â”œâ”€â”€ nest-cli.json                   # NestJS CLIé…ç½®
â”‚   â”œâ”€â”€ .env                           # ç¯å¢ƒå˜é‡ (éœ€è¦åˆ›å»º)
â”‚   â””â”€â”€ env.example                     # ç¯å¢ƒå˜é‡æ¨¡æ¿
â”‚
â”œâ”€â”€ ğŸ“Š æ•°æ®åº“
â”‚   â”œâ”€â”€ prisma/
â”‚   â”‚   â”œâ”€â”€ schema.prisma              # æ•°æ®åº“Schemaå®šä¹‰
â”‚   â”‚   â””â”€â”€ seed.ts                    # åˆå§‹æ•°æ®ç§å­
â”‚
â”œâ”€â”€ ğŸ“š æ–‡æ¡£
â”‚   â”œâ”€â”€ README.md                      # é¡¹ç›®æ€»è§ˆ
â”‚   â”œâ”€â”€ QUICKSTART.md                  # å¿«é€Ÿå¯åŠ¨æŒ‡å—
â”‚   â”œâ”€â”€ BACKEND-COMPLETE.md            # åç«¯åŠŸèƒ½å®ŒæˆæŠ¥å‘Š
â”‚   â”œâ”€â”€ PROJECT-STRUCTURE.md           # é¡¹ç›®ç»“æ„è¯´æ˜ (æœ¬æ–‡ä»¶)
â”‚   â”œâ”€â”€ test-api.http                  # APIæµ‹è¯•æ–‡ä»¶
â”‚   â””â”€â”€ docs/                          # ä¸šåŠ¡æ–‡æ¡£
â”‚       â”œâ”€â”€ flow.md                    # ä¸šåŠ¡æµç¨‹å›¾
â”‚       â””â”€â”€ startup.md                 # é¡¹ç›®è§„åˆ’æ–‡æ¡£
â”‚
â””â”€â”€ ğŸ’» æºä»£ç 
    â””â”€â”€ src/
        â”œâ”€â”€ main.ts                    # åº”ç”¨å…¥å£ç‚¹
        â”œâ”€â”€ app.module.ts              # æ ¹æ¨¡å—
        â”‚
        â”œâ”€â”€ ğŸ”§ å…¬å…±æ¨¡å— (common/)
        â”‚   â”œâ”€â”€ prisma/                # æ•°æ®åº“æœåŠ¡
        â”‚   â”‚   â”œâ”€â”€ prisma.module.ts
        â”‚   â”‚   â””â”€â”€ prisma.service.ts
        â”‚   â”œâ”€â”€ dto/                   # æ•°æ®ä¼ è¾“å¯¹è±¡
        â”‚   â”‚   â””â”€â”€ pagination.dto.ts
        â”‚   â”œâ”€â”€ filters/               # å¼‚å¸¸è¿‡æ»¤å™¨
        â”‚   â”‚   â””â”€â”€ http-exception.filter.ts
        â”‚   â”œâ”€â”€ interceptors/          # æ‹¦æˆªå™¨
        â”‚   â”‚   â””â”€â”€ logging.interceptor.ts
        â”‚   â”œâ”€â”€ types/                 # ç±»å‹å®šä¹‰
        â”‚   â”‚   â””â”€â”€ graphql.types.ts
        â”‚   â””â”€â”€ utils/                 # å·¥å…·å‡½æ•°
        â”‚       â”œâ”€â”€ date.utils.ts
        â”‚       â””â”€â”€ string.utils.ts
        â”‚
        â”œâ”€â”€ âš™ï¸ é…ç½®æ¨¡å— (config/)
        â”‚   â”œâ”€â”€ app.config.ts          # åº”ç”¨é…ç½®
        â”‚   â”œâ”€â”€ database.config.ts     # æ•°æ®åº“é…ç½®
        â”‚   â”œâ”€â”€ jwt.config.ts          # JWTé…ç½®
        â”‚   â””â”€â”€ gitlab.config.ts       # GitLabé›†æˆé…ç½®
        â”‚
        â””â”€â”€ ğŸ¢ ä¸šåŠ¡æ¨¡å— (modules/)
            â”œâ”€â”€ auth/                  # è®¤è¯æ¨¡å—
            â”‚   â”œâ”€â”€ auth.module.ts
            â”‚   â”œâ”€â”€ auth.service.ts
            â”‚   â”œâ”€â”€ auth.resolver.ts
            â”‚   â”œâ”€â”€ strategies/        # è®¤è¯ç­–ç•¥
            â”‚   â”‚   â”œâ”€â”€ jwt.strategy.ts
            â”‚   â”‚   â””â”€â”€ local.strategy.ts
            â”‚   â”œâ”€â”€ guards/            # å®ˆå«
            â”‚   â”‚   â”œâ”€â”€ jwt-auth.guard.ts
            â”‚   â”‚   â”œâ”€â”€ permissions.guard.ts
            â”‚   â”‚   â””â”€â”€ roles.guard.ts
            â”‚   â””â”€â”€ decorators/        # è£…é¥°å™¨
            â”‚       â”œâ”€â”€ current-user.decorator.ts
            â”‚       â”œâ”€â”€ permissions.decorator.ts
            â”‚       â””â”€â”€ roles.decorator.ts
            â”‚
            â”œâ”€â”€ users/                 # ç”¨æˆ·ç®¡ç†
            â”‚   â”œâ”€â”€ users.module.ts
            â”‚   â”œâ”€â”€ users.service.ts
            â”‚   â””â”€â”€ users.resolver.ts
            â”‚
            â”œâ”€â”€ projects/              # é¡¹ç›®ç®¡ç†
            â”‚   â”œâ”€â”€ projects.module.ts
            â”‚   â”œâ”€â”€ projects.service.ts
            â”‚   â””â”€â”€ projects.resolver.ts
            â”‚
            â”œâ”€â”€ tasks/                 # ä»»åŠ¡ç®¡ç†
            â”‚   â”œâ”€â”€ tasks.module.ts
            â”‚   â”œâ”€â”€ tasks.service.ts
            â”‚   â””â”€â”€ tasks.resolver.ts
            â”‚
            â”œâ”€â”€ teams/                 # å›¢é˜Ÿç®¡ç†
            â”‚   â”œâ”€â”€ teams.module.ts
            â”‚   â”œâ”€â”€ teams.service.ts
            â”‚   â””â”€â”€ teams.resolver.ts
            â”‚
            â””â”€â”€ gitlab/                # GitLabé›†æˆ
                â”œâ”€â”€ gitlab.module.ts
                â”œâ”€â”€ gitlab.service.ts
                â””â”€â”€ gitlab.controller.ts
```

## ğŸ¯ æ¨¡å—è¯´æ˜

### æ ¸å¿ƒæ¨¡å—

#### 1. è®¤è¯æ¨¡å— (`auth/`)
- **åŠŸèƒ½**: JWTè®¤è¯ã€ç”¨æˆ·ç™»å½•æ³¨å†Œã€æƒé™éªŒè¯
- **å…³é”®æ–‡ä»¶**:
  - `auth.service.ts`: è®¤è¯ä¸šåŠ¡é€»è¾‘
  - `jwt.strategy.ts`: JWTç­–ç•¥
  - `permissions.guard.ts`: æƒé™å®ˆå«
- **API**: ç™»å½•ã€æ³¨å†Œã€è·å–å½“å‰ç”¨æˆ·ã€åˆ·æ–°Token

#### 2. ç”¨æˆ·ç®¡ç† (`users/`)
- **åŠŸèƒ½**: ç”¨æˆ·CRUDã€è§’è‰²åˆ†é…ã€æƒé™ç®¡ç†
- **ç‰¹æ€§**: RBACæƒé™æ§åˆ¶ã€ç”¨æˆ·ç»Ÿè®¡ã€æ‰¹é‡æ“ä½œ
- **API**: ç”¨æˆ·åˆ—è¡¨ã€åˆ›å»ºç”¨æˆ·ã€æ›´æ–°è§’è‰²ã€ç”¨æˆ·ç»Ÿè®¡

#### 3. é¡¹ç›®ç®¡ç† (`projects/`)
- **åŠŸèƒ½**: é¡¹ç›®ç”Ÿå‘½å‘¨æœŸç®¡ç†ã€æˆå‘˜ç®¡ç†ã€æƒé™æ§åˆ¶
- **ç‰¹æ€§**: é¡¹ç›®æˆå‘˜è§’è‰²ã€GitLabé›†æˆã€é¡¹ç›®ç»Ÿè®¡
- **API**: é¡¹ç›®CRUDã€æˆå‘˜ç®¡ç†ã€é¡¹ç›®ç»Ÿè®¡

#### 4. ä»»åŠ¡ç®¡ç† (`tasks/`)
- **åŠŸèƒ½**: ä»»åŠ¡CRUDã€å±‚çº§å…³ç³»ã€ä¾èµ–ç®¡ç†ã€è¯„è®ºç³»ç»Ÿ
- **ç‰¹æ€§**: çˆ¶å­ä»»åŠ¡ã€ä»»åŠ¡ä¾èµ–ã€å·¥æ—¶è®°å½•ã€çŠ¶æ€æµè½¬
- **API**: ä»»åŠ¡CRUDã€ä¾èµ–ç®¡ç†ã€è¯„è®ºç³»ç»Ÿ

#### 5. å›¢é˜Ÿç®¡ç† (`teams/`)
- **åŠŸèƒ½**: å›¢é˜Ÿç»„ç»‡ã€æˆå‘˜ç®¡ç†ã€è§’è‰²åˆ†é…
- **ç‰¹æ€§**: éƒ¨é—¨å…³è”ã€æˆå‘˜è§’è‰²ã€å›¢é˜Ÿç»Ÿè®¡
- **API**: å›¢é˜ŸCRUDã€æˆå‘˜ç®¡ç†ã€å›¢é˜Ÿç»Ÿè®¡

#### 6. GitLabé›†æˆ (`gitlab/`)
- **åŠŸèƒ½**: GitLab APIé›†æˆã€é¡¹ç›®åŒæ­¥ã€IssueåŒæ­¥
- **ç‰¹æ€§**: åŒå‘åŒæ­¥ã€Webhookæ”¯æŒã€ç”¨æˆ·æ˜ å°„
- **API**: é¡¹ç›®åŒæ­¥ã€Issueç®¡ç†ã€ç”¨æˆ·ä¿¡æ¯

### é…ç½®æ¨¡å—

#### 1. åº”ç”¨é…ç½® (`app.config.ts`)
- ç«¯å£ã€ç¯å¢ƒã€CORSè®¾ç½®
- æ–‡ä»¶ä¸Šä¼ é…ç½®
- åˆ†é¡µå’Œé€Ÿç‡é™åˆ¶é…ç½®

#### 2. æ•°æ®åº“é…ç½® (`database.config.ts`)
- Supabaseè¿æ¥é…ç½®
- è¿æ¥æ± è®¾ç½®
- æŸ¥è¯¢æ—¥å¿—é…ç½®

#### 3. JWTé…ç½® (`jwt.config.ts`)
- å¯†é’¥å’Œè¿‡æœŸæ—¶é—´
- åˆ·æ–°Tokené…ç½®
- ç­¾å‘è€…å’Œå—ä¼—é…ç½®

#### 4. GitLabé…ç½® (`gitlab.config.ts`)
- GitLab APIé…ç½®
- Webhooké…ç½®
- åŒæ­¥å’Œæ˜ å°„é…ç½®

### å…¬å…±æ¨¡å—

#### 1. æ•°æ®åº“æœåŠ¡ (`common/prisma/`)
- Prismaå®¢æˆ·ç«¯å°è£…
- è¿æ¥ç®¡ç†
- æ•°æ®åº“æ¸…ç†å·¥å…·

#### 2. å·¥å…·å‡½æ•° (`common/utils/`)
- **æ—¥æœŸå·¥å…·**: å·¥ä½œæ—¥è®¡ç®—ã€æ—¥æœŸæ ¼å¼åŒ–
- **å­—ç¬¦ä¸²å·¥å…·**: éšæœºå­—ç¬¦ä¸²ã€æ ¼å¼è½¬æ¢ã€éªŒè¯

#### 3. å¼‚å¸¸å¤„ç† (`common/filters/`)
- GraphQLå¼‚å¸¸è¿‡æ»¤å™¨
- ç»Ÿä¸€é”™è¯¯å“åº”æ ¼å¼

#### 4. æ—¥å¿—è®°å½• (`common/interceptors/`)
- GraphQLæ“ä½œæ—¥å¿—
- æ€§èƒ½ç›‘æ§
- ç”¨æˆ·æ“ä½œè¿½è¸ª

## ğŸ“Š æ•°æ®æ¨¡å‹æ¶æ„

### ç”¨æˆ·æƒé™ä½“ç³»
```
Department (éƒ¨é—¨) 
    â†“
Team (å›¢é˜Ÿ) â†â†’ TeamMember (å›¢é˜Ÿæˆå‘˜)
    â†“
User (ç”¨æˆ·) â†â†’ UserRole (ç”¨æˆ·è§’è‰²) â†â†’ Role (è§’è‰²)
                                       â†“
                              RolePermission (è§’è‰²æƒé™)
                                       â†“
                              Permission (æƒé™)
```

### é¡¹ç›®ä»»åŠ¡ä½“ç³»
```
Project (é¡¹ç›®) â†â†’ ProjectMember (é¡¹ç›®æˆå‘˜)
    â†“
Workflow (å·¥ä½œæµ) â†â†’ WorkflowState (å·¥ä½œæµçŠ¶æ€)
    â†“
Task (ä»»åŠ¡) â†â†’ TaskDependency (ä»»åŠ¡ä¾èµ–)
    â†“
Comment (è¯„è®º) + Attachment (é™„ä»¶) + TimeLog (å·¥æ—¶è®°å½•)
```

## ğŸ” æƒé™ç³»ç»Ÿæ¶æ„

### è§’è‰²å±‚çº§
1. **super_admin** - è¶…çº§ç®¡ç†å‘˜
2. **admin** - ç®¡ç†å‘˜  
3. **project_manager** - é¡¹ç›®ç»ç†
4. **member** - æ™®é€šæˆå‘˜

### æƒé™åˆ†ç±»
- **ç”¨æˆ·ç®¡ç†**: `user:create|read|update|delete`
- **é¡¹ç›®ç®¡ç†**: `project:create|read|update|delete`
- **ä»»åŠ¡ç®¡ç†**: `task:create|read|update|delete|assign`
- **å›¢é˜Ÿç®¡ç†**: `team:create|read|update|delete`
- **æ—¶é—´ç®¡ç†**: `timelog:create|read|update|delete`

### æƒé™éªŒè¯æµç¨‹
```
è¯·æ±‚ â†’ JWTå®ˆå« â†’ æƒé™å®ˆå« â†’ ä¸šåŠ¡é€»è¾‘
                    â†“
            æ£€æŸ¥ç”¨æˆ·è§’è‰²æƒé™
                    â†“
            éªŒè¯èµ„æºè®¿é—®æƒé™
```

## ğŸ”„ APIæ¶æ„

### GraphQL Schema
- **ç±»å‹å®‰å…¨**: TypeScript + GraphQLè‡ªåŠ¨ç”Ÿæˆ
- **çµæ´»æŸ¥è¯¢**: æ”¯æŒæ·±åº¦å…³è”å’ŒæŒ‰éœ€è·å–
- **æƒé™æ§åˆ¶**: åŸºäºè£…é¥°å™¨çš„ç»†ç²’åº¦æƒé™éªŒè¯
- **åˆ†é¡µæŸ¥è¯¢**: ç»Ÿä¸€çš„åˆ†é¡µã€ç­›é€‰ã€æ’åºæ¥å£

### RESTful API (GitLabé›†æˆ)
- **é¡¹ç›®åŒæ­¥**: `/api/gitlab/sync/project`
- **Issueç®¡ç†**: `/api/gitlab/projects/:id/issues`
- **ç”¨æˆ·ä¿¡æ¯**: `/api/gitlab/user`
- **è¿æ¥éªŒè¯**: `/api/gitlab/validate`

## ğŸš€ éƒ¨ç½²æ¶æ„

### å¼€å‘ç¯å¢ƒ
```
localhost:3000 (NestJS)
    â†“
Supabase (PostgreSQL)
    â†“
GitLab API (å¯é€‰)
```

### ç”Ÿäº§ç¯å¢ƒå»ºè®®
```
Load Balancer
    â†“
NestJS Cluster (å¤šå®ä¾‹)
    â†“
Supabase/PostgreSQL (ä¸»ä»)
    â†“
Redis (ç¼“å­˜/ä¼šè¯)
    â†“
GitLab/å¤–éƒ¨æœåŠ¡
```

## ğŸ“ˆ æ‰©å±•è§„åˆ’

### çŸ­æœŸæ‰©å±•
1. **æ–‡ä»¶ä¸Šä¼ **: ä»»åŠ¡é™„ä»¶ã€ç”¨æˆ·å¤´åƒ
2. **å®æ—¶é€šçŸ¥**: WebSocketæ¶ˆæ¯æ¨é€
3. **é‚®ä»¶é€šçŸ¥**: SMTPé›†æˆ
4. **æ•°æ®å¯¼å‡º**: Excel/PDFæŠ¥è¡¨

### ä¸­æœŸæ‰©å±•
1. **å·¥ä½œæµå¼•æ“**: è‡ªå®šä¹‰çŠ¶æ€æµè½¬
2. **æ‰¹é‡æ“ä½œ**: ä»»åŠ¡æ‰¹é‡å¤„ç†
3. **APIæ–‡æ¡£**: Swagger/GraphQLæ–‡æ¡£
4. **æ€§èƒ½ç›‘æ§**: APMé›†æˆ

### é•¿æœŸæ‰©å±•
1. **å¾®æœåŠ¡æ‹†åˆ†**: æŒ‰ä¸šåŠ¡æ¨¡å—æ‹†åˆ†
2. **å¤šç§Ÿæˆ·**: SaaSæ¨¡å¼æ”¯æŒ
3. **ç§»åŠ¨ç«¯**: React Native/Flutter
4. **AIè¾…åŠ©**: æ™ºèƒ½ä»»åŠ¡åˆ†é…ã€è¿›åº¦é¢„æµ‹

---

è¿™ä¸ªæ¶æ„è®¾è®¡æ”¯æŒ50-100äººå›¢é˜Ÿè§„æ¨¡ï¼Œå…·å¤‡è‰¯å¥½çš„æ‰©å±•æ€§å’Œç»´æŠ¤æ€§ã€‚æ‰€æœ‰æ¨¡å—éƒ½éµå¾ªå•ä¸€èŒè´£åŸåˆ™ï¼Œä¾¿äºåç»­çš„åŠŸèƒ½æ‰©å±•å’Œæ€§èƒ½ä¼˜åŒ–ã€‚
