# VibeProject - å†…éƒ¨é¡¹ç›®ç®¡ç†ç³»ç»Ÿ

åŸºäºNestJS + Prisma + PostgreSQL(Supabase)çš„ç°ä»£åŒ–é¡¹ç›®ç®¡ç†ç³»ç»Ÿï¼Œä¸“ä¸º50-100äººå›¢é˜Ÿè®¾è®¡ã€‚

## ğŸš€ ç³»ç»Ÿç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- **ç”¨æˆ·ä¸æƒé™ç®¡ç†**: åŸºäºRBACçš„ç»†ç²’åº¦æƒé™æ§åˆ¶
- **é¡¹ç›®ç®¡ç†**: å®Œæ•´çš„é¡¹ç›®ç”Ÿå‘½å‘¨æœŸç®¡ç†
- **ä»»åŠ¡ç®¡ç†**: æ”¯æŒçˆ¶å­ä»»åŠ¡ã€ä¾èµ–å…³ç³»ã€å¤šè§†å›¾å±•ç¤º
- **å›¢é˜Ÿåä½œ**: å®æ—¶è¯„è®ºã€@æåŠã€æ–‡ä»¶é™„ä»¶
- **å·¥ä½œæµå¼•æ“**: å¯è‡ªå®šä¹‰çš„ä»»åŠ¡çŠ¶æ€æµè½¬
- **æ—¶é—´ç®¡ç†**: å·¥æ—¶è®°å½•ä¸å›¢é˜Ÿè´Ÿè·åˆ†æ
- **GitLabé›†æˆ**: ä¸GitLabé¡¹ç›®å’ŒIssueåŒå‘åŒæ­¥

### æŠ€æœ¯äº®ç‚¹
- **TypeScriptå…¨æ ˆ**: å‰åç«¯ç±»å‹å®‰å…¨
- **Prisma ORM**: ç°ä»£åŒ–æ•°æ®åº“è®¿é—®å±‚
- **GraphQL API**: çµæ´»çš„æ•°æ®æŸ¥è¯¢
- **å®æ—¶é€šä¿¡**: WebSocketæ”¯æŒ
- **æ¨¡å—åŒ–æ¶æ„**: æ˜“äºç»´æŠ¤å’Œæ‰©å±•

## ğŸ“‹ æ•°æ®æ¨¡å‹è®¾è®¡

### æ ¸å¿ƒå®ä½“å…³ç³»

```
ç”¨æˆ·ç®¡ç†ä½“ç³»:
User (ç”¨æˆ·) â†â†’ Department (éƒ¨é—¨) â†â†’ Team (å›¢é˜Ÿ)
  â†“
UserRole â†â†’ Role â†â†’ RolePermission â†â†’ Permission

é¡¹ç›®ç®¡ç†ä½“ç³»:
Project (é¡¹ç›®) â†â†’ ProjectMember (é¡¹ç›®æˆå‘˜)
  â†“
Task (ä»»åŠ¡) â†â†’ TaskDependency (ä»»åŠ¡ä¾èµ–)
  â†“
Comment (è¯„è®º) + Attachment (é™„ä»¶) + TimeLog (å·¥æ—¶)

å·¥ä½œæµä½“ç³»:
Workflow (å·¥ä½œæµ) â†â†’ WorkflowState (çŠ¶æ€) â†â†’ WorkflowTransition (çŠ¶æ€è½¬æ¢)
```

### æƒé™æ¨¡å‹ (RBAC)

**é¢„è®¾è§’è‰²**:
- `super_admin`: è¶…çº§ç®¡ç†å‘˜ - æ‰€æœ‰æƒé™
- `admin`: ç®¡ç†å‘˜ - é™¤ç”¨æˆ·åˆ é™¤å¤–çš„æ‰€æœ‰æƒé™  
- `project_manager`: é¡¹ç›®ç»ç† - é¡¹ç›®å’Œä»»åŠ¡ç®¡ç†æƒé™
- `member`: æ™®é€šæˆå‘˜ - åŸºç¡€å‚ä¸æƒé™

**æƒé™åˆ†ç±»**:
- ç”¨æˆ·ç®¡ç†: `user:create|read|update|delete`
- é¡¹ç›®ç®¡ç†: `project:create|read|update|delete`
- ä»»åŠ¡ç®¡ç†: `task:create|read|update|delete|assign`
- å›¢é˜Ÿç®¡ç†: `team:create|read|update|delete`
- æ—¶é—´ç®¡ç†: `timelog:create|read|update|delete`

## ğŸ› ï¸ å¿«é€Ÿå¼€å§‹

### 1. ç¯å¢ƒå‡†å¤‡

```bash
# å…‹éš†é¡¹ç›®
git clone <repository-url>
cd vibe-project

# å®‰è£…ä¾èµ–
npm install
```

### 2. æ•°æ®åº“é…ç½®

1. å¤åˆ¶ç¯å¢ƒå˜é‡é…ç½®:
```bash
cp env.example .env
```

2. ä¿®æ”¹ `.env` æ–‡ä»¶ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯:
```env
DATABASE_URL="postgresql://postgres.lbixsgvknepmluguvbss:[YOUR-PASSWORD]@aws-1-ap-southeast-1.pooler.supabase.com:6543/postgres?pgbouncer=true"
DIRECT_URL="postgresql://postgres.lbixsgvknepmluguvbss:[YOUR-PASSWORD]@aws-1-ap-southeast-1.pooler.supabase.com:5432/postgres"
```

### 3. æ•°æ®åº“åˆå§‹åŒ–

```bash
# ç”ŸæˆPrismaå®¢æˆ·ç«¯
npm run db:generate

# æ¨é€æ•°æ®åº“ç»“æ„åˆ°Supabase
npm run db:push

# è¿è¡Œæ•°æ®ç§å­ (åˆ›å»ºåˆå§‹æ•°æ®)
npm run db:seed
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
# å¼€å‘æ¨¡å¼å¯åŠ¨
npm run start:dev

# æœåŠ¡å°†åœ¨ http://localhost:3000 å¯åŠ¨
```

### 5. é»˜è®¤ç™»å½•ä¿¡æ¯

- **é‚®ç®±**: `admin@company.com`
- **å¯†ç **: `admin123456`
- **è§’è‰²**: è¶…çº§ç®¡ç†å‘˜

## ğŸ“Š æ•°æ®åº“è¡¨ç»“æ„è¯¦è§£

### ç”¨æˆ·æƒé™ç›¸å…³è¡¨

| è¡¨å | è¯´æ˜ | æ ¸å¿ƒå­—æ®µ |
|------|------|----------|
| `users` | ç”¨æˆ·åŸºç¡€ä¿¡æ¯ | email, username, name, departmentId |
| `departments` | éƒ¨é—¨ç»„ç»‡æ¶æ„ | name, parentId (æ”¯æŒå±‚çº§) |
| `teams` | å›¢é˜Ÿä¿¡æ¯ | name, departmentId |
| `team_members` | å›¢é˜Ÿæˆå‘˜å…³ç³» | userId, teamId, role |
| `roles` | è§’è‰²å®šä¹‰ | name, description, isSystem |
| `permissions` | æƒé™å®šä¹‰ | name, resource, action |
| `user_roles` | ç”¨æˆ·è§’è‰²å…³è” | userId, roleId |
| `role_permissions` | è§’è‰²æƒé™å…³è” | roleId, permissionId |

### é¡¹ç›®ä»»åŠ¡ç›¸å…³è¡¨

| è¡¨å | è¯´æ˜ | æ ¸å¿ƒå­—æ®µ |
|------|------|----------|
| `projects` | é¡¹ç›®åŸºç¡€ä¿¡æ¯ | name, key, status, ownerId, teamId |
| `project_members` | é¡¹ç›®æˆå‘˜ | projectId, userId, role |
| `tasks` | ä»»åŠ¡ä¿¡æ¯ | title, status, priority, projectId, assigneeId |
| `task_dependencies` | ä»»åŠ¡ä¾èµ–å…³ç³» | dependentTaskId, precedingTaskId |
| `comments` | ä»»åŠ¡è¯„è®º | content, taskId, authorId, parentId |
| `attachments` | æ–‡ä»¶é™„ä»¶ | filename, fileUrl, taskId |
| `time_logs` | å·¥æ—¶è®°å½• | hours, date, taskId, userId |

### å·¥ä½œæµç›¸å…³è¡¨

| è¡¨å | è¯´æ˜ | æ ¸å¿ƒå­—æ®µ |
|------|------|----------|
| `workflows` | å·¥ä½œæµå®šä¹‰ | name, projectId, isDefault |
| `workflow_states` | å·¥ä½œæµçŠ¶æ€ | name, color, order, workflowId |
| `workflow_transitions` | çŠ¶æ€è½¬æ¢è§„åˆ™ | fromStateId, toStateId |

### GitLabé›†æˆå­—æ®µ

åœ¨ç›¸å…³è¡¨ä¸­é¢„ç•™äº†GitLabé›†æˆå­—æ®µ:
- `users.gitlabUserId` / `gitlabUsername` / `gitlabToken`
- `projects.gitlabProjectId` / `gitlabProjectUrl`  
- `tasks.gitlabIssueId` / `gitlabIssueUrl`

## ğŸ”„ å·¥ä½œæµç¨‹è®¾è®¡

### æ ‡å‡†ä»»åŠ¡æµç¨‹
1. **å¾…åŠ** (TODO) â†’ **è¿›è¡Œä¸­** (IN_PROGRESS) 
2. **è¿›è¡Œä¸­** â†’ **å¾…å®¡æŸ¥** (IN_REVIEW)
3. **å¾…å®¡æŸ¥** â†’ **å·²å®Œæˆ** (DONE) æˆ–è¿”å› **è¿›è¡Œä¸­**

### é¡¹ç›®çŠ¶æ€æµç¨‹  
1. **è§„åˆ’ä¸­** (PLANNING) â†’ **è¿›è¡Œä¸­** (ACTIVE)
2. **è¿›è¡Œä¸­** â†’ **æš‚åœ** (ON_HOLD) æˆ– **å·²å®Œæˆ** (COMPLETED)
3. ä»»ä½•çŠ¶æ€ â†’ **å·²å–æ¶ˆ** (CANCELLED)

## ğŸ”§ å¼€å‘å‘½ä»¤

```bash
# æ•°æ®åº“ç›¸å…³
npm run db:generate     # ç”ŸæˆPrismaå®¢æˆ·ç«¯
npm run db:push        # æ¨é€schemaåˆ°æ•°æ®åº“
npm run db:migrate     # åˆ›å»ºæ•°æ®åº“è¿ç§»
npm run db:studio      # æ‰“å¼€Prisma Studio
npm run db:reset       # é‡ç½®æ•°æ®åº“
npm run db:seed        # è¿è¡Œæ•°æ®ç§å­

# å¼€å‘ç›¸å…³  
npm run start:dev      # å¼€å‘æ¨¡å¼å¯åŠ¨
npm run start:debug    # è°ƒè¯•æ¨¡å¼å¯åŠ¨
npm run build          # æ„å»ºç”Ÿäº§ç‰ˆæœ¬
npm run start:prod     # ç”Ÿäº§æ¨¡å¼å¯åŠ¨

# ä»£ç è´¨é‡
npm run lint           # ä»£ç æ£€æŸ¥
npm run format         # ä»£ç æ ¼å¼åŒ–
npm run test           # è¿è¡Œæµ‹è¯•
npm run test:e2e       # ç«¯åˆ°ç«¯æµ‹è¯•
```

## ğŸ“ é¡¹ç›®ç»“æ„

```
vibe-project/
â”œâ”€â”€ prisma/
â”‚   â”œâ”€â”€ schema.prisma          # æ•°æ®åº“Schemaå®šä¹‰
â”‚   â””â”€â”€ seed.ts               # åˆå§‹æ•°æ®ç§å­
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ modules/              # ä¸šåŠ¡æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ auth/            # è®¤è¯æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ users/           # ç”¨æˆ·ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ projects/        # é¡¹ç›®ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ tasks/           # ä»»åŠ¡ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ teams/           # å›¢é˜Ÿç®¡ç†
â”‚   â”‚   â””â”€â”€ gitlab/          # GitLabé›†æˆ
â”‚   â”œâ”€â”€ common/              # å…¬å…±æ¨¡å—
â”‚   â”‚   â”œâ”€â”€ guards/          # å®ˆå«
â”‚   â”‚   â”œâ”€â”€ decorators/      # è£…é¥°å™¨
â”‚   â”‚   â””â”€â”€ filters/         # è¿‡æ»¤å™¨
â”‚   â”œâ”€â”€ config/              # é…ç½®
â”‚   â””â”€â”€ main.ts             # åº”ç”¨å…¥å£
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â””â”€â”€ README.md
```

## ğŸ”— é›†æˆè¯´æ˜

### GitLabé›†æˆåŠŸèƒ½
- **ç”¨æˆ·åŒæ­¥**: é€šè¿‡GitLab Tokenè·å–ç”¨æˆ·ä¿¡æ¯
- **é¡¹ç›®å…³è”**: é¡¹ç›®å¯å…³è”GitLabé¡¹ç›®ï¼ŒåŒæ­¥åŸºç¡€ä¿¡æ¯
- **IssueåŒæ­¥**: ä»»åŠ¡å¯å…³è”GitLab Issueï¼Œå®ç°åŒå‘åŒæ­¥
- **æƒé™æ˜ å°„**: GitLabé¡¹ç›®æƒé™æ˜ å°„åˆ°ç³»ç»Ÿå†…éƒ¨æƒé™

### æ‰©å±•é›†æˆ
ç³»ç»Ÿæ¶æ„è®¾è®¡æ”¯æŒä¸ä»¥ä¸‹ç³»ç»Ÿé›†æˆ:
- **é’‰é’‰/ä¼ä¸šå¾®ä¿¡**: æ¶ˆæ¯é€šçŸ¥ã€ç”¨æˆ·åŒæ­¥
- **Jira**: ä»»åŠ¡æ•°æ®è¿ç§»ä¸åŒæ­¥
- **Confluence**: æ–‡æ¡£ç®¡ç†é›†æˆ
- **Jenkins/GitLab CI**: æ„å»ºçŠ¶æ€åŒæ­¥

## ğŸ“ˆ å¼€å‘è¿›å±•çŠ¶æ€

### âœ… å·²å®ŒæˆåŠŸèƒ½ (90%)

#### æ ¸å¿ƒä¸šåŠ¡æ¨¡å—
- âœ… **ç”¨æˆ·è®¤è¯ç³»ç»Ÿ**: JWTè®¤è¯ã€RBACæƒé™ã€è§’è‰²ç®¡ç†
- âœ… **ç”¨æˆ·ç®¡ç†æ¨¡å—**: ç”¨æˆ·CRUDã€ç»„ç»‡æ¶æ„ã€æƒé™åˆ†é…
- âœ… **é¡¹ç›®ç®¡ç†æ¨¡å—**: é¡¹ç›®CRUDã€æˆå‘˜ç®¡ç†ã€æƒé™æ§åˆ¶
- âœ… **ä»»åŠ¡ç®¡ç†æ¨¡å—**: ä»»åŠ¡CRUDã€å±‚çº§å…³ç³»ã€ä¾èµ–ç®¡ç†
- âœ… **Issueç®¡ç†æ¨¡å—**: äº§å“å»ºè®®ã€çŠ¶æ€æµè½¬ã€ä¸šåŠ¡è¯„ä¼°
- âœ… **PRDç®¡ç†æ¨¡å—**: æ–‡æ¡£ç®¡ç†ã€ç‰ˆæœ¬æ§åˆ¶ã€è¯„å®¡æµç¨‹
- âœ… **å›¢é˜Ÿç®¡ç†æ¨¡å—**: å›¢é˜ŸCRUDã€æˆå‘˜ç®¡ç†ã€ç»Ÿè®¡åˆ†æ
- âœ… **è¯„è®ºåä½œç³»ç»Ÿ**: ä»»åŠ¡è¯„è®ºã€Issueè®¨è®ºã€å›å¤åŠŸèƒ½
- âœ… **æ–‡ä»¶ç®¡ç†ç³»ç»Ÿ**: é™„ä»¶ä¸Šä¼ ã€å…³è”ç®¡ç†ã€æƒé™æ§åˆ¶
- âœ… **å·¥ä½œæµå¼•æ“**: çŠ¶æ€å®šä¹‰ã€è½¬æ¢è§„åˆ™ã€æƒé™éªŒè¯

#### æŠ€æœ¯æ¶æ„
- âœ… **æ•°æ®åº“è®¾è®¡**: 24å¼ è¡¨å®Œæ•´å…³ç³»æ¨¡å‹
- âœ… **GraphQL API**: 60+ä¸ªæŸ¥è¯¢å˜æ›´æ¥å£
- âœ… **æƒé™ç³»ç»Ÿ**: 25ä¸ªç»†åˆ†æƒé™ç‚¹
- âœ… **æ•°æ®ç§å­**: å®Œæ•´çš„åˆå§‹æµ‹è¯•æ•°æ®

#### å‰ç«¯ç³»ç»Ÿ
- âœ… **å‰ç«¯æ¶æ„**: Next.js + TypeScript + Tailwind CSS
- âœ… **UIç»„ä»¶åº“**: åŸºäºshadcn/uiçš„ä¼ä¸šçº§ç»„ä»¶
- âœ… **é¡µé¢æ¨¡å—**: Issuesç®¡ç†ã€ä»»åŠ¡çœ‹æ¿ã€äººå‘˜ç®¡ç†
- âœ… **å“åº”å¼è®¾è®¡**: ç§»åŠ¨ç«¯é€‚é…å®Œæˆ

### ğŸš§ è¿›è¡Œä¸­åŠŸèƒ½ (10%)

#### é«˜çº§åŠŸèƒ½
- ğŸ”„ **å®æ—¶é€šä¿¡**: WebSocketæ¶ˆæ¯æ¨é€ (70%å®Œæˆ)
- ğŸ”„ **é€šçŸ¥ç³»ç»Ÿ**: é‚®ä»¶å’Œç«™å†…é€šçŸ¥ (60%å®Œæˆ)
- ğŸ”„ **æ•°æ®ç»Ÿè®¡**: é¡¹ç›®åˆ†ææŠ¥è¡¨ (40%å®Œæˆ)

#### é›†æˆåŠŸèƒ½
- ğŸ”„ **GitLabé›†æˆ**: IssueåŒå‘åŒæ­¥ (30%å®Œæˆ)
- â³ **ç¬¬ä¸‰æ–¹é›†æˆ**: é’‰é’‰/ä¼ä¸šå¾®ä¿¡é›†æˆ
- â³ **ç§»åŠ¨ç«¯API**: ç§»åŠ¨åº”ç”¨æ”¯æŒ

### ğŸ“‹ è§„åˆ’åŠŸèƒ½

#### ä¼ä¸šçº§åŠŸèƒ½
- â³ **å¤šç§Ÿæˆ·æ¶æ„**: ä¼ä¸šçº§éƒ¨ç½²æ”¯æŒ
- â³ **APIç½‘å…³**: RESTful API + é™æµæ§åˆ¶
- â³ **ç³»ç»Ÿç›‘æ§**: æ€§èƒ½ç›‘æ§ä¸æ—¥å¿—åˆ†æ
- â³ **æ•°æ®å¤‡ä»½**: è‡ªåŠ¨å¤‡ä»½ä¸æ¢å¤æœºåˆ¶

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

---

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·æäº¤ Issue æˆ–è”ç³»å¼€å‘å›¢é˜Ÿã€‚

**è®©é¡¹ç›®ç®¡ç†æ›´é«˜æ•ˆï¼Œè®©å›¢é˜Ÿåä½œæ›´é¡ºç•…ï¼** ğŸ¯

